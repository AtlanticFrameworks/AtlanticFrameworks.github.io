const translations = {
    de: {
        "nav.home": "Startseite",
        "nav.about": "Über Uns",
        "rules.title": "REGELWERK",
        "rules.subtitle": "Die Grundsätze für ein faires und authentisches Spielerlebnis.",
        "appeal.title": "ENTBANNUNG",
        "appeal.subtitle": "Jeder macht Fehler. Hier hast du die Möglichkeit, deinen Ausschluss aus der Community anzufechten.",
        "appeal.btn": "ANTRAG STELLEN",
        "nav.units": "Einheiten",
        "nav.studio": "Studio",
        "nav.rules": "Regelwerk",
        "nav.appeal": "Entbannung",
        "nav.play": "JETZT SPIELEN",
        "hero.system": "System Online // v2.4",
        "hero.serve": "Wir. Dienen.",
        "hero.sub": "Authentisches Rollenspiel. Taktische Tiefe. Deutsche Militärtradition.",
        "hero.join": "Tritt der größten deutschen Milsim-Community bei.",
        "hero.start": "Einsatz Beginnen",
        "hero.discord": "Discord",
        "hero.scroll": "Scroll",
        "ticker.connection": "VERBINDUNG STABIL",
        "ticker.personnel": "Online Personal:",
        "ticker.update": "+++ NEUES UPDATE: KARRIERE CENTER +++ FELDJÄGER FAHRZEUGE EINGETROFFEN +++ KSK REKRUTIERUNG OFFEN +++ MARINE ÜBUNG GESTARTET +++",
        "units.subtitle": "Truppengattungen",
        "units.title": "EINSATZKRÄFTE",
        "units.access": "ZUGRIFF AUF PERSONALAKTEN.<br>WÄHLEN SIE EINE EINHEIT FÜR DETAILS.",
        "modal.details": "Details ansehen",
        "studio.title": "ATLANTIC STUDIOS",
        "studio.desc": "Entwickelt mit Leidenschaft für die Community. Wir bringen militärische Simulation auf ein neues Level durch fortschrittliche Scripts, detaillierte Maps und ein faires Rangsystem.",
        "studio.roblox": "Roblox Gruppe",
        "studio.team": "UNSER TEAM",
        "studio.team_desc": "Die Köpfe hinter dem Projekt.",
        "footer.rights": "&copy; 2024 ATLANTIC Studios. Alle Rechte vorbehalten.",
        "footer.privacy": "Datenschutz",
        "modal.class": "Klassifiziert: Öffentlich",
        "modal.task": "Aufgabenbereich",
        "modal.access": "Zugang",
        "modal.difficulty": "Schwierigkeit",
        "modal.difficulty": "Schwierigkeit",
        "modal.gamepass": "Gamepass erforderlich",
        "modal.rank_abc": "Gamepass / ab Rang: Feldwebel",
        "modal.high": "Hoch",
        "modal.buy_gamepass": "Gamepass Kaufen",
        "modal.status": "Rekrutierungsstatus",
        "modal.status.open": "OFFEN",
        "modal.status.closed": "GESCHLOSSEN",
        "modal.req": "Bestimmungen beachten!",
        "modal.view": "Im Spiel ansehen",
        "units.ksk.desc": "Eliteeinheit für spezielle Operationen. Geiselbefreiung und direkte Einwirkung im Krisengebiet.",
        "units.feldjaeger.desc": "Die Militärpolizei der Bundeswehr. Zuständig für Ordnung, Sicherheit und Ermittlungen.",
        "units.marine.desc": "Operationen zu Wasser. Sicherung der Küstengewässer und amphibische Landungen.",
        "units.sani.desc": "Medizinische Versorgung der Truppe. Retten, Bergen und Behandeln im Gefecht.",
        "units.raider.desc": "Feinddarstellung und Opposition. Organisiere Angriffe und Hinterhalte.",
        "units.abc.desc": "Schutz vor atomaren, biologischen und chemischen Bedrohungen. Dekontamination.",
        "units.wachbataillon.desc": "Das Protokoll. Ehrengarde und Sicherung des Bundesministeriums der Verteidigung.",
        "units.un.desc": "United Nations Peacekeepers. Internationale Friedenssicherung und humanitäre Hilfe."
    },
    en: {
        "nav.home": "Home",
        "nav.about": "About Us",
        "rules.title": "RULES",
        "rules.subtitle": "The principles for a fair and authentic gaming experience.",
        "appeal.title": "BAN APPEAL",
        "appeal.subtitle": "Everyone makes mistakes. Here you can appeal your ban from the community.",
        "appeal.btn": "SUBMIT APPEAL",
        "nav.units": "Units",
        "nav.studio": "Studio",
        "nav.rules": "Rules",
        "nav.appeal": "Ban Appeal",
        "nav.play": "PLAY NOW",
        "hero.system": "System Online // v2.4",
        "hero.serve": "We. Serve.",
        "hero.sub": "Authentic Roleplay. Tactical Depth. German Military Tradition.",
        "hero.join": "Join the biggest German Milsim Community.",
        "hero.start": "Start Operation",
        "hero.discord": "Discord",
        "hero.scroll": "Scroll",
        "ticker.connection": "CONNECTION STABLE",
        "ticker.personnel": "Online Personnel:",
        "ticker.update": "+++ NEW UPDATE: CAREER CENTER +++ MILITARY POLICE VEHICLES ARRIVED +++ KSK RECRUITMENT OPEN +++ NAVY EXERCISE STARTED +++",
        "units.subtitle": "Branches",
        "units.title": "FORCES",
        "units.access": "ACCESSING PERSONNEL FILES.<br>SELECT A UNIT FOR DETAILS.",
        "modal.details": "View Details",
        "studio.title": "ATLANTIC STUDIOS",
        "studio.desc": "Developed with passion for the community. We bring military simulation to a new level through advanced scripts, detailed maps, and a fair rank system.",
        "studio.roblox": "Roblox Group",
        "studio.team": "OUR TEAM",
        "studio.team_desc": "The minds behind the project.",
        "footer.rights": "&copy; 2024 ATLANTIC Studios. All rights reserved.",
        "footer.privacy": "Privacy Policy",
        "modal.class": "Classified: Public",
        "modal.task": "Responsibility",
        "modal.access": "Access",
        "modal.difficulty": "Difficulty",
        "modal.difficulty": "Difficulty",
        "modal.gamepass": "Gamepass Required",
        "modal.rank_abc": "Gamepass / Rank: Staff Sergeant",
        "modal.high": "High",
        "modal.buy_gamepass": "Buy Gamepass",
        "modal.status": "Recruitment Status",
        "modal.status.open": "OPEN",
        "modal.status.closed": "CLOSED",
        "modal.req": "Check requirements!",
        "modal.view": "View In-Game",
        "units.ksk.desc": "Elite unit for special operations. Hostage rescue and direct action in crisis areas.",
        "units.feldjaeger.desc": " The Military Police of the Bundeswehr. Responsible for order, security, and investigations.",
        "units.marine.desc": "Operations at sea. Securing coastal waters and amphibious landings.",
        "units.sani.desc": "Medical supply for the troops. Rescue, recovery, and treatment in combat.",
        "units.raider.desc": "Enemy representation and opposition. Organize attacks and ambushes.",
        "units.abc.desc": "Protection against nuclear, biological, and chemical threats. Decontamination.",
        "units.wachbataillon.desc": "The Protocol. Guard of Honor and security for the Ministry of Defence.",
        "units.un.desc": "United Nations Peacekeepers. International peacekeeping and humanitarian aid."
    }
};

function setLanguage(lang) {
    localStorage.setItem('lang', lang);
    document.documentElement.lang = lang;

    // Update all elements with data-i18n attribute
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (translations[lang][key]) {
            // Check if element has HTML content
            if (element.innerHTML.includes('<') || translations[lang][key].includes('<')) {
                element.innerHTML = translations[lang][key];
            } else {
                element.textContent = translations[lang][key];
            }
        }
    });

    // Update Flag/Button state if exists
    const langBtn = document.getElementById('lang-toggle');
    if (langBtn) {
        langBtn.querySelector('span').textContent = lang.toUpperCase();
    }
}

function toggleLanguage() {
    const current = localStorage.getItem('lang') || 'de';
    const next = current === 'de' ? 'en' : 'de';
    setLanguage(next);
}

// Init on load
document.addEventListener('DOMContentLoaded', () => {
    const savedLang = localStorage.getItem('lang') || 'de';
    setLanguage(savedLang);
});
